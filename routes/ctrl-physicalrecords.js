'use strict';

 /**
 * physicalrecord controller file * autogenerated by mongoose-scaffold-crud **/

var physicalrecords = require('express').Router(),
    Model = require('../models/model-physicalrecords.js');

physicalrecords.get('/', function(req, res) {
    Model.find(function(err, physicalrecords){
        if (req.accepts('html', 'json') === 'json') {
            if(err) {
                return res.json(500, {
                    message: 'Error getting physicalrecords.'
                });
            }
            return res.json(physicalrecords);
        } else {
            if(err) {
                return res.send('500: Internal Server Error', 500);
            }
        return res.render('physicalrecords/index', {physicalrecords: physicalrecords});
        }
    });
});

physicalrecords.post('/', function(req, res) {
    var physicalrecord = new Model({
        // TODO: generate Date parser.,
        'weight': req.body['weight'],
        'height': req.body['height'],
        'blood_pressure': req.body['blood_pressure'],
        'pulse:': req.body['pulse:'],
        'temperature': req.body['temperature']
    });
    physicalrecord.save(function(err, physicalrecord){
        if (req.accepts('html', 'json') === 'json') {
            if(err) {
                return res.json(500, {
                    message: 'Error saving item.',
                    error: err
                });
            }
            return res.json({
                message: 'saved',
                _id: physicalrecord._id
            });
        } else {
            if(err) {
                return res.send('500: Internal Server Error', 500);
            }
            return res.render('physicalrecords/edit', {physicalrecord: physicalrecord});
        }
    });
});

physicalrecords.get('/:id', function(req, res) {
    var id = req.params.id;
    Model.findOne({_id: id}, function(err, physicalrecord){
        if (req.accepts('html', 'json') === 'json') {
            if(err) {
                return res.json(500, {
                    message: 'Error getting physicalrecord.'
                });
            }
            if(!physicalrecord) {
                return res.json(404, {
                    message: 'No such physicalrecord.'
                });
            }
            return res.json(physicalrecord);
        } else {
            if(err) {
                return res.send('500: Internal Server Error', 500);
            }
            if(!physicalrecord) {
                return res.end('No such physicalrecord');
            }
            return res.render('physicalrecords/edit', {physicalrecord: physicalrecord, flash: 'Created.'});
        }
    });
});

physicalrecords.put('/:id', function(req, res) {
    var id = req.params.id;
    Model.findOne({_id: id}, function(err, physicalrecord){
        if (req.accepts('html', 'json') === 'json') {
            if(err) {
                return res.json(500, {
                    message: 'Error saving physicalrecord',
                    error: err
                });
            }
            if(!physicalrecord) {
                return res.json(404, {
                    message: 'No such physicalrecord'
                });
            }
            // TODO: generate Date parser.
            physicalrecord['weight'] = req.body['weight'] ? req.body['weight'] : physicalrecord['weight'];
            physicalrecord['height'] = req.body['height'] ? req.body['height'] : physicalrecord['height'];
            physicalrecord['blood_pressure'] = req.body['blood_pressure'] ? req.body['blood_pressure'] : physicalrecord['blood_pressure'];
            physicalrecord['pulse:'] = req.body['pulse:'] ? req.body['pulse:'] : physicalrecord['pulse:'];
            physicalrecord['temperature'] = req.body['temperature'] ? req.body['temperature'] : physicalrecord['temperature'];
            physicalrecord.save(function(err, physicalrecord){
                if(err) {
                    return res.json(500, {
                        message: 'Error getting physicalrecord.'
                    });
                }
                if(!physicalrecord) {
                    return res.json(404, {
                        message: 'No such physicalrecord'
                    });
                }
                return res.json(physicalrecord);
            });
        } else {
            if(err) {
                return res.send('500: Internal Server Error', 500);
            }
            if(!physicalrecord) {
                return res.end('No such physicalrecord');
            }
            // TODO: generate Date parser.
            physicalrecord['weight'] = req.body['weight'] ? req.body['weight'] : physicalrecord['weight'];
            physicalrecord['height'] = req.body['height'] ? req.body['height'] : physicalrecord['height'];
            physicalrecord['blood_pressure'] = req.body['blood_pressure'] ? req.body['blood_pressure'] : physicalrecord['blood_pressure'];
            physicalrecord['pulse:'] = req.body['pulse:'] ? req.body['pulse:'] : physicalrecord['pulse:'];
            physicalrecord['temperature'] = req.body['temperature'] ? req.body['temperature'] : physicalrecord['temperature'];
            physicalrecord.save(function(err, physicalrecord){
                if(err) {
                    return res.send('500: Internal Server Error', 500);
                }
                if(!physicalrecord) {
                    return res.end('No such physicalrecord');
                }
                return res.render('physicalrecords/edit', {physicalrecord: physicalrecord, flash: 'Saved.'});
            });
        }
    });
});

physicalrecords.delete('/:id', function(req, res) {
    var id = req.params.id;
    Model.findOne({_id: id}, function(err, physicalrecord){
        if (req.accepts('html', 'json') === 'json') {
            if(err) {
                return res.json(500, {
                    message: 'Error getting physicalrecord.'
                });
            }
            if(!physicalrecord) {
                return res.json(404, {
                    message: 'No such physicalrecord'
                });
            }
            return res.json(physicalrecord);
        } else {
            if(err) {
                return res.send('500: Internal Server Error', 500);
            }
            if(!physicalrecord) {
                return res.end('No such physicalrecord');
            }
            return res.render('index', {flash: 'Item deleted.'});
        }
    });
});

module.exports.physicalrecords = physicalrecords;